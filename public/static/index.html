<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Simple REST API Tester</title>
</head>

<body>
    <h1>Channel API Tester</h1>

    <h2>GET /channels/</h2>
    <form method="get" action="/channels/">
        <button type="submit">Fetch All Channels</button>
    </form>

    <h2>POST /channels</h2>
    <form method="post" action="/channels">
        <input name="url" placeholder="URL" required />
        <button type="submit">Import Feed</button>
    </form>

    <h2>GET /channels/:id/</h2>
    <form method="get" onsubmit="handleGetById(event)">
        <input id="getId" placeholder="Channel ID" required />
        <button type="submit">Fetch Channel by ID</button>
    </form>

    <h2>DELETE /channels/:id/</h2>
    <form method="post" onsubmit="handleDelete(event)">
        <input id="deleteId" placeholder="Channel ID" required />
        <button type="submit">Delete Channel</button>
    </form>

    <h2>PUT /channels</h2>
    <form method="post" onsubmit="handlePut(event)">
        <input id="putId" placeholder="ID" required /><br />
        <input id="putTitle" placeholder="Title" /><br />
        <input id="putLang" placeholder="Language" /><br />
        <textarea id="putDesc" placeholder="Description"></textarea><br />
        <button type="submit">Update Channel</button>
    </form>

    <script>
        function handleGetById(event) {
            event.preventDefault();
            const id = document.getElementById('getId').value;
            window.location.href = `/channels/${id}/`;
        }

        function handleDelete(event) {
            event.preventDefault();
            const id = document.getElementById('deleteId').value;
            fetch(`/channels/${id}/`, {
                method: 'DELETE'
            }).then(() => window.location.reload());
        }

        function handlePut(event) {
            event.preventDefault();
            const id = document.getElementById('putId').value;
            const data = {
                title: document.getElementById('putTitle').value,
                language: document.getElementById('putLang').value,
                description: document.getElementById('putDesc').value,
            };

            fetch(`/channels/${id}/`, {
                method: 'PUT',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data),
            }).then(() => window.location.reload());
        }

    </script>
</body>

</html>